
<head>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,300,100,700" rel="stylesheet" type="text/css">

	
     

</head>
<body>

    INDEX

	<div id="container">
    </div>
    <script>
    
    var $ = require('jquery');
    var _ = require('backbone/node_modules/underscore');
    var backbone = require('backbone');
    var http = require('http');    
    
    
    //create a totally empty model
    var model = backbone.Model.extend({
        
    });
    
    
    //create a totally empty view and stick a render callback on it
    //which is called when the view is initialized
    var view = backbone.View.extend({ 
         el: '#container',
               
          initialize: function(){
		  this.render();
      },

      render: function(){ 
		console.log("renderedView");
        this.$el.append(String(JSON.stringify(this.model.attributes)) + "<br>");
        console.log(this.model.attributes);  
      }
        
    });
        
    callback = function(response) {
      var str = '';

  //another chunk of data has been recieved, so append it to `str`
  response.on('data', function (chunk) {
        console.log(chunk);
    str += chunk;
  });

  //the whole response has been recieved, so we just print it out here
  //and handle it by creating some models....
  response.on('end', function () {
console.log("end of stream")
console.log(str);
CreateModelsFromResponse(str);
  });
  
}
 
 
    
CreateModelsFromResponse = function (str){
    
    var models = JSON.parse(str);
backboneModels =  _.map(models,function(data) {return new model(data) });
backboneViews = _.map(backboneModels, function(bbModel) {return new view({model : bbModel})});

console.log(backboneModels.length);
}    
    
    
    
//The url we want is: 'localhost:8080/'
var options = {
  host: 'localhost',
  port:'8080',
  path: '/Models/'
};

  http.request(options, callback).end();

    
    console.log("we have loaded the index");    
    
    </script>
</body>

</html>